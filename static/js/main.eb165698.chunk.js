(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(24),s=n.n(r),a=n(19),o=n.n(a),i=n(18),u=n.n(i),l=n(21),j=n(17),d=n(6),b=(n(122),n(5)),h=function(e){var t=e.id,n=e.go,r=e.fetchedUser,s=e.userFriends,a=e.chooseUser,o=Object(c.useState)(""),i=Object(j.a)(o,2),u=i[0],l=i[1],h=Object(c.useState)(""),p=Object(j.a)(h,2),f=p[0],O=p[1];return Object(c.useEffect)((function(){s&&O(s.response.items)}),[s]),Object(c.useEffect)((function(){u?O((function(e){return e.filter((function(e){return e.first_name.toLowerCase().startsWith(u.toLowerCase())||e.last_name.toLowerCase().startsWith(u.toLowerCase())}))})):!u&&s&&O((function(e){return s?s.response.items:f}))}),[u]),Object(b.jsxs)(d.n,{id:t,children:[Object(b.jsx)(d.o,{children:"Friends"}),r&&Object(b.jsx)(d.i,{header:Object(b.jsx)(d.j,{mode:"secondary",children:"I am"}),children:Object(b.jsx)(d.e,{before:r.photo_200?Object(b.jsx)(d.c,{src:r.photo_200}):null,description:r.city&&r.city.title?r.city.title:"",children:"".concat(r.first_name," ").concat(r.last_name)})}),Object(b.jsxs)(d.i,{header:Object(b.jsx)(d.j,{mode:"secondary",children:"My friends"}),children:[Object(b.jsx)(d.r,{value:u,onChange:function(e){return t=e,l((function(e){return t.target.value})),void console.log(u);var t}}),Object(b.jsx)(d.l,{children:f?f.map((function(e,t){return Object(b.jsx)(d.t,{onClick:function(e){return c=t,r=e,a((function(e){return c})),void n(r);var c,r},"data-to":"detailed",before:e.photo_100?Object(b.jsx)(d.c,{src:e.photo_100}):null,description:e.city&&e.city.title?e.city.title:"",children:"".concat(e.first_name," ").concat(e.last_name)},t)})):""})]})]})},p=n(27),f=n(125),O=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(!1),i=Object(j.a)(a,2),h=i[0],O=i[1],m=Object(c.useState)(null),x=Object(j.a)(m,2),y=x[0],g=x[1],v=Object(c.useState)([]),_=Object(j.a)(v,2),k=_[0],w=_[1],S=["January","February","March","April","May","June","July","August","September","Oktober","November","December"];function C(){return(C=Object(l.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(r.domain);case 2:return t=e.sent,n=t.keys[0].value?t.keys[0].value:"[]",e.next=6,JSON.parse(n);case 6:c=e.sent,console.log(c),A(r.domain,JSON.stringify([].concat(Object(p.a)(c),[y]))).then((function(e){return I()})),g((function(e){return""})),O((function(e){return!e}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppStorageSet",{key:t,value:n});case 2:c=e.sent,console.log("from storageSet",c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return N.apply(this,arguments)}function N(){return(N=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppStorageGet",{keys:[t]});case 2:return n=e.sent,console.log("from storageGet",n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(l.a)(u.a.mark((function e(t){var n,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(r.domain);case 2:return n=e.sent,c=n.keys[0].value?n.keys[0].value:"[]",e.next=6,JSON.parse(c);case 6:s=e.sent,console.log(s),A(r.domain,JSON.stringify([].concat(Object(p.a)(s.slice(0,t)),Object(p.a)(s.slice(t+1))))).then((function(e){return I()}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(r.domain);case 2:return t=e.sent,n=t.keys[0].value?t.keys[0].value:"[]",e.next=6,JSON.parse(n);case 6:c=e.sent,w(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s((function(t){return e.userFriends.response.items[e.whichUser]}))}),[e]),Object(c.useEffect)((function(){r&&I()}),[r]),console.log("noteStorage:",k),console.log(y),r&&console.log("detailed",e.storage),Object(b.jsxs)(d.n,{id:e.id,children:[Object(b.jsxs)(d.o,{left:Object(b.jsx)(d.p,{onClick:e.go,"data-to":"home"}),children:["back to the list ",console.log(r)]}),r?Object(b.jsxs)(d.i,{children:[Object(b.jsxs)(d.h,{style:{margin:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32},children:[(null===r||void 0===r?void 0:r.photo_200_orig)?Object(b.jsx)(d.c,{size:96,src:r.photo_200_orig}):null,Object(b.jsx)(d.v,{style:{marginBottom:8,marginTop:20},level:"2",weight:"medium",children:"".concat(r.first_name," ").concat(r.last_name,"  ")}),r.status?Object(b.jsx)(d.m,{textWrap:"full",children:Object(b.jsx)(d.k,{header:"\u0427\u0442\u043e \u0434\u0443\u043c\u0430\u0435\u0442:",children:"".concat(r.status)})}):""]}),Object(b.jsxs)(d.i,{children:[Object(b.jsx)(d.j,{mode:"secondary",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435"}),r.bdate?Object(b.jsx)(d.t,{children:Object(b.jsx)(d.k,{header:"\u0414\u0435\u043d\u044c \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",children:"".concat(function(e){var t=e.match(/\d+/g);return t[1]=S[t[1]-1],t.join(" ")}(r.bdate))})}):"",r.city&&r.city.title?Object(b.jsx)(d.t,{children:Object(b.jsx)(d.k,{header:"\u0413\u043e\u0440\u043e\u0434",children:"".concat(r.city.title)})}):"",r.country&&r.country.title?Object(b.jsx)(d.t,{children:Object(b.jsx)(d.k,{header:"\u0421\u0442\u0440\u0430\u043d\u0430",children:"".concat(r.country.title)})}):"",r.faculty_name?Object(b.jsx)(d.t,{children:Object(b.jsxs)(d.k,{header:"\u041e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435",children:["\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u043b"," ".concat(r.faculty_name),Object(b.jsx)("br",{}),r.university_name?" \u0432 ".concat(r.university_name," "):"",r.graduation?"  \u0432 ".concat(r.graduation," \u0433\u043e\u0434\u0443"):""]})}):""]}),h?Object(b.jsx)(d.i,{children:Object(b.jsx)(d.g,{top:"What`s on your mind?",children:Object(b.jsx)(d.u,{onChange:function(e){g((function(t){return e.target.value}))},placeholder:"write something about this person"})})}):"",h?Object(b.jsx)(d.d,{style:{marginLeft:"15px"},onClick:function(){return function(){return C.apply(this,arguments)}()},mode:y?"commerce":"destructive",children:y?"save":"close"}):Object(b.jsx)(d.f,{onClick:function(){return O((function(e){return!e}))},before:Object(b.jsx)(f.a,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443"}),k.length?Object(b.jsxs)(d.i,{children:[Object(b.jsx)(d.j,{mode:"secondary",children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435"}),Object(b.jsx)(d.t,{children:k.map((function(e,t){return Object(b.jsxs)(d.m,{textWrap:"full",children:["Note ".concat(t+1,": ").concat(e),Object(b.jsx)(d.d,{style:{marginLeft:"15px"},onClick:function(){return function(e){return U.apply(this,arguments)}(t)},mode:"destructive",children:"delete"})]})}))})]}):""]}):""]})},m=function(){var e=Object(c.useState)("home"),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(null),a=Object(j.a)(s,2),i=a[0],p=a[1],f=Object(c.useState)(null),m=Object(j.a)(f,2),x=m[0],y=m[1],g=Object(c.useState)(null),v=Object(j.a)(g,2),_=v[0],k=v[1],w=Object(c.useState)(Object(b.jsx)(d.q,{size:"large"})),S=Object(j.a)(w,2),C=S[0],A=S[1];Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:return t=e.sent,e.next=5,o.a.send("VKWebAppGetAuthToken",{app_id:7888409,scope:"friends"});case 5:return n=e.sent,e.next=8,o.a.send("VKWebAppCallAPIMethod",{method:"friends.get",request_id:7888409,params:{user_ids:"".concat(t.id),v:"5.131",access_token:"".concat(n.access_token),fields:" nickname, domain, sex, bdate, city, country, timezone, photo_50, photo_100, photo_200_orig, has_mobile, contacts, education, online, relation, last_seen, status, can_write_private_message, can_see_all_posts, can_post, universities"}});case 8:c=e.sent,p(t),y(c),A(null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=c.scheme?c.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var W=function(e){r(e.currentTarget.dataset.to)};return Object(b.jsx)(d.a,{children:Object(b.jsx)(d.b,{children:Object(b.jsxs)(d.w,{activePanel:n,popout:C,children:[Object(b.jsx)(h,{id:"home",fetchedUser:i,chooseUser:k,userFriends:x,go:W}),Object(b.jsx)(O,{id:"detailed",whichUser:_,userFriends:x,go:W})]})})})};o.a.send("VKWebAppInit"),s.a.render(Object(b.jsx)(m,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.eb165698.chunk.js.map