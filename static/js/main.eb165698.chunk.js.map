{"version":3,"sources":["panels/Home.js","panels/Detailed.js","App.js","index.js"],"names":["Home","id","go","fetchedUser","userFriends","chooseUser","useState","search","setSearch","friendList","setFriendList","useEffect","response","items","f","filter","el","first_name","toLowerCase","startsWith","last_name","header","mode","before","photo_200","src","description","city","title","value","onChange","event","e","s","target","console","log","map","index","onClick","i","u","data-to","photo_100","Detailed","props","userInfo","setUserInfo","addNote","setAddNote","notes","setNotes","noteStorage","setNoteStorage","month","a","getStorage","domain","storageReq","storage","keys","JSON","parse","newStorage","setStorage","stringify","then","result","updateStorage","n","noteKey","noteValue","bridge","send","key","storageSet","storageGet","indexN","slice","whichUser","left","style","margin","display","flexDirection","alignItems","justifyContent","textAlign","padding","photo_200_orig","size","marginBottom","marginTop","level","weight","status","textWrap","bdate","str","match","join","getDate","country","faculty_name","university_name","graduation","top","placeholder","marginLeft","addNoteStorage","length","deleteNote","App","activePanel","setActivePanel","setUser","setUsersFriends","detailedUser","setDetailedUser","popout","setPopout","user","app_id","scope","userFriendsToken","method","request_id","params","access_token","friends","subscribe","detail","type","data","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","currentTarget","dataset","to","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.eb165698.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Panel, PanelHeader, Header, Button, Group, Cell, SimpleCell, Div, Avatar, List,Search } from '@vkontakte/vkui';\n\nconst Home = ({ id, go, fetchedUser, userFriends, chooseUser }) => {\n\tconst [search, setSearch] = useState('');\n\tconst [friendList, setFriendList] = useState('')\n\n\t// go to Detailed page\n\tfunction getDetailedInfo(i,e){\n\t\tchooseUser(u=> i)\n\t\tgo(e);\n\n\t}\n\n\t// receive info about users friends\n\tuseEffect(()=>{\n\t\tif(userFriends)setFriendList(userFriends.response.items)\n\t},[userFriends])\n\n\t// for searching friends\n\tfunction findFriends(e){\n\t\tsetSearch(s => e.target.value);\n\t\tconsole.log(search)\n\t}\n\tuseEffect(()=>{\n\t\tif(search ){\n\t\tsetFriendList(f => f.filter(el => el.first_name.toLowerCase().startsWith(search.toLowerCase()) || el.last_name.toLowerCase().startsWith(search.toLowerCase())))\t\n\t\t}else if(!search && userFriends) {\n\t\t\tsetFriendList( f => userFriends? userFriends.response.items: friendList)\n\t\t}\n\t},[search])\n\t\n\treturn (\n\t\t<Panel id={id}>\n\t\t<PanelHeader>Friends</PanelHeader>\n\t\t{fetchedUser &&\n\t\t<Group header={<Header mode=\"secondary\">I am</Header>}>\n\t\t\t<Cell\n\t\t\t\tbefore={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\n\t\t\t\tdescription={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}\n\t\t\t>\n\t\t\t\t{`${fetchedUser.first_name} ${fetchedUser.last_name}`}\n\t\t\t</Cell>\n\t\t</Group>}\n\n\t\t<Group header={<Header mode=\"secondary\">My friends</Header>}>\n\t\t\t<Search value={search} onChange={(event)=>findFriends(event)} />\n\t\t\t<List>\n\t\t\t\t{ friendList ? friendList.map((el,index) => {\n\t\t\treturn (\n\t\t\t\t<SimpleCell \n\t\t\t\t   onClick={(event)=>getDetailedInfo(index,event)}\n\t\t\t\t   data-to=\"detailed\"\n\t\t\t       key={index}\n\t\t\t\t   before={el.photo_100? <Avatar src={el.photo_100}/> : null}\n\t\t\t\t   description={el.city && el.city.title ? el.city.title: ''}         \n\t\t\t\t>\n\t\t\t\t\t{`${el.first_name} ${el.last_name}`}\n\t\t\t\t</SimpleCell>)}) : ''}\n\t\t\t</List>\n\t\t\t\n\t\t\n\t\t</Group>\n\t</Panel>\n\t)\n};\n\n\n\nexport default Home;\n","import React, {useState, useEffect} from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport {Icon28AddOutline} from '@vkontakte/icons'\r\nimport { Panel, PanelHeader, PanelHeaderBack,Group, Gradient, Title, Avatar, InfoRow, Header,SimpleCell, CellButton, Textarea, FormItem, Button, Cell,MiniInfoCell } from '@vkontakte/vkui';\r\n\r\n\r\n\r\n\r\nconst Detailed = props => {\r\n\r\n    const [userInfo, setUserInfo] = useState(null);\r\n    const [addNote, setAddNote] = useState(false);\r\n    const [notes, setNotes] = useState(null);\r\n    const [noteStorage, setNoteStorage] = useState([]);\r\n\r\n    let month = ['January', \"February\", 'March', 'April', 'May', 'June', 'July', 'August', 'September','Oktober', 'November', 'December'];\r\n\r\n    // to recieve user info \r\n    useEffect(()=>{\r\n        setUserInfo( i => props.userFriends.response.items[props.whichUser])\r\n        \r\n    },[props])\r\n\r\n    // to update user info\r\n    useEffect(()=>{\r\n        if(userInfo){\r\n            updateStorage();\r\n        }\r\n    },[userInfo])\r\n\r\n    // to convert b-date\r\n    function getDate(str){\r\n        let result = str.match(/\\d+/g);\r\n        result[1] = month[result[1]-1];\r\n       return result.join(' ');\r\n    }\r\n\r\n    // to store recieved note before adding to page\r\n    function writeANote(e){\r\n        setNotes(n=> e.target.value);\r\n    }\r\n\r\n    // add a note to local storage and to the page\r\n    async function addNoteStorage(){\r\n        \r\n        let storageReq = await getStorage(userInfo.domain);\r\n        let storage = storageReq.keys[0].value? storageReq.keys[0].value : \"[]\";\r\n        let newStorage = await JSON.parse(storage);\r\n        console.log(newStorage)\r\n        setStorage(userInfo.domain,JSON.stringify([...newStorage, notes]))\r\n        .then(result => updateStorage())\r\n    \r\n        setNotes(n => '')\r\n        setAddNote( n => !n)\r\n    }\r\n\r\n    // add the note to VK Bridge Storage\r\n    async function setStorage(noteKey, noteValue){\r\n\t\tconst storageSet = await bridge.send('VKWebAppStorageSet', {\r\n\t\t\tkey: noteKey ,\r\n\t\t\tvalue: noteValue\r\n\t\t});\r\n\t\tconsole.log('from storageSet', storageSet)\r\n\t}\r\n\r\n    // to get notes from BK Bridge Storage\r\n\tasync function getStorage(noteKey){\r\n\t\tconst storageGet = await bridge.send('VKWebAppStorageGet', {\r\n\t\t\tkeys: [noteKey],\r\n\t\t})\r\n        console.log('from storageGet',storageGet)\r\n\t\treturn storageGet;\r\n\t}\r\n\r\n    \r\n    // to delete the note from VK Bridge Storage and page\r\n    async function deleteNote(indexN){\r\n  \r\n        let storageReq = await getStorage(userInfo.domain);\r\n        let storage =  storageReq.keys[0].value? storageReq.keys[0].value : \"[]\";\r\n        let newStorage = await JSON.parse(storage);\r\n        console.log(newStorage)\r\n        setStorage(userInfo.domain,JSON.stringify([...newStorage.slice(0, indexN), ...newStorage.slice(indexN+1)]))\r\n        .then(result => updateStorage())\r\n   \r\n    }\r\n\r\n    // to update internal React State to re-render notes on this page\r\n    async function updateStorage(){\r\n        let storageReq = await getStorage(userInfo.domain);\r\n        let storage = storageReq.keys[0].value? storageReq.keys[0].value : \"[]\";\r\n        let newStorage = await JSON.parse(storage);\r\n        setNoteStorage(newStorage)\r\n        \r\n    }\r\n\r\n// just for checking purposes\r\nconsole.log('noteStorage:',noteStorage)\r\nconsole.log(notes)\r\nuserInfo?     console.log('detailed', props.storage): '';\r\n\r\n    return (\r\n      <Panel id={props.id}>\r\n\t\t<PanelHeader\r\n\t\t\tleft={<PanelHeaderBack onClick={props.go} data-to=\"home\"/>}\r\n\t\t>\r\n\t\t\tback to the list {console.log(userInfo)}\r\n\t\t</PanelHeader>\r\n        { userInfo? \r\n    <Group>\r\n        <Gradient style={{\r\n            margin: 0,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            textAlign: 'center',\r\n            padding: 32,\r\n        }}> \r\n        {userInfo?.photo_200_orig? <Avatar size={96} src={userInfo.photo_200_orig}/> : null}\r\n        <Title style={{ marginBottom: 8, marginTop: 20 }} level=\"2\" weight=\"medium\">{`${userInfo.first_name} ${userInfo.last_name}  `}</Title>\r\n        {userInfo.status? <MiniInfoCell textWrap=\"full\">\r\n                    <InfoRow header='Что думает:'>\r\n                        {`${userInfo.status}`}\r\n                   </InfoRow> \r\n               </MiniInfoCell>: ''}\r\n\r\n        </Gradient>\r\n          <Group>\r\n              <Header mode=\"secondary\">Информация о пользователе</Header>\r\n              \r\n               {userInfo.bdate?<SimpleCell>\r\n                    <InfoRow header='День рождения'>\r\n                       {`${getDate(userInfo.bdate)}`}\r\n                   </InfoRow> \r\n               </SimpleCell> : ''}\r\n               {userInfo.city && userInfo.city.title ?<SimpleCell>\r\n                    <InfoRow header='Город'>\r\n                        {`${userInfo.city.title}`}\r\n                   </InfoRow> \r\n               </SimpleCell> : ''}\r\n               {userInfo.country && userInfo.country.title ?<SimpleCell>\r\n                    <InfoRow header='Страна'>\r\n                        {`${userInfo.country.title}`}\r\n                   </InfoRow> \r\n               </SimpleCell >: ''}\r\n               {userInfo.faculty_name?<SimpleCell>\r\n                    <InfoRow header='Образование'>\r\n                    Закончил\r\n                        {` ${userInfo.faculty_name}`}<br/>\r\n                        {userInfo.university_name? ` в ${userInfo.university_name} `: '' }\r\n                        {userInfo.graduation? `  в ${userInfo.graduation} году`: '' }\r\n                   </InfoRow> \r\n               </SimpleCell >: ''}\r\n              \r\n          </Group>\r\n          \r\n          {addNote ? <Group>\r\n              <FormItem top=\"What`s on your mind?\">\r\n                  <Textarea onChange={writeANote} placeholder=\"write something about this person\" />\r\n              </FormItem>\r\n               </Group> : '' }\r\n          {addNote? <Button style={{marginLeft: '15px'}} onClick={()=>addNoteStorage()} mode={notes? 'commerce': 'destructive'}>{notes? 'save' : 'close'}</Button> :<CellButton onClick={()=>setAddNote( n => !n)} before={<Icon28AddOutline />}>Добавить заметку</CellButton>}\r\n\r\n          {noteStorage.length?\r\n          <Group>\r\n          <Header mode=\"secondary\">Заметки о пользователе</Header>\r\n          <SimpleCell>\r\n    \r\n               {noteStorage.map((el,index) =>{\r\n                  return <MiniInfoCell textWrap=\"full\">{`Note ${index+1}: ${el}`}<Button style={{marginLeft: '15px'}} onClick={()=>deleteNote(index)} mode=\"destructive\">delete</Button></MiniInfoCell>\r\n              })} \r\n              \r\n          </SimpleCell>\r\n          </Group> : ''\r\n           }\r\n          \r\n        </Group>\r\n        \r\n         : ''}\r\n        \r\n\t\r\n\t</Panel>  \r\n    )\r\n\t\r\n};\r\n\r\n\r\nexport default Detailed;","import React, { useState, useEffect, useMemo } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Detailed from './panels/Detailed';\n\n\n\n\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [userFriends, setUsersFriends] = useState(null);\n\tconst [detailedUser, setDetailedUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n\n\n\n\tuseEffect(() => {\n\t\t\n\t\t// to install the right theme on a device\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\n\t\t// get user data and necessary permissons\n\t\tasync function fetchData() {\n\t\t\t\n\t\t\t// main info\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\n\t\t\t// permission to get info about user`s friends\n\t\t\tconst userFriendsToken = await bridge.send('VKWebAppGetAuthToken', {\n\t\t\t\tapp_id: 7888409,\n\t\t\t\tscope: \"friends\"\n\t\t\t});\n\t\t\t\n\t\t\t// get info about user`s friends\n\t\t\tconst friends = await bridge.send(\"VKWebAppCallAPIMethod\", {\n\t\t\t\tmethod: \"friends.get\",\n\t\t\t\trequest_id:7888409,\n\t\t\t\tparams: {\n\t\t\t\t\t\"user_ids\": `${user.id}`, \n\t\t\t\t\t\"v\":\"5.131\",\n\t\t\t\t\t\"access_token\":`${userFriendsToken.access_token}`,\n\t\t\t\t\t\"fields\": \" nickname, domain, sex, bdate, city, country, timezone, photo_50, photo_100, photo_200_orig, has_mobile, contacts, education, online, relation, last_seen, status, can_write_private_message, can_see_all_posts, can_post, universities\"\n\t\t\t\t}\n\t\t\t})\n\n\t        setUser(user);\n\t        setUsersFriends(friends);\n\t\t\tsetPopout(null);\n\t\t\t\n\t\t}\n\t\tfetchData() \n\t}, []);\n\n\t\n\n// to switch between pages\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\n\treturn (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t\t\t<Home id='home' fetchedUser={fetchedUser} chooseUser={setDetailedUser} userFriends={userFriends} go={go} />\n\t\t\t\t\t<Detailed id='detailed' whichUser={detailedUser} userFriends={userFriends}  go={go}/>\n\t\t\t\t</View>\n\t\t\t</AppRoot>\n\t\t</AdaptivityProvider>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}